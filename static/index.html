<!doctype html>
<html>
    <head>
        <title>D3</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="author" content="Thomas A. Valletta"/>
        <link href="css/impress.css" rel="stylesheet"/>
        <link href="css/prettify.css" rel="stylesheet"/>
        <link href="css/presentation.css" rel="stylesheet"/>
        <script type="text/javascript" src='js/jquery-1.8.2.min.js'></script>
        <script type='text/javascript' src='js/lib/d3.v3.js'></script>
        <script type="text/javascript" src='js/prettify.js'></script>
        <style>
            .demo svg {
                stroke: gray;
                stroke-width: 10;
            }

            .demo rect {
                fill: whitesmoke;
            }

            .demo circle {
                fill: white;
            }
        </style>
    </head>
    <body onload='prettyPrint()'>
        <p class="fallback-message">
            Your browser doesn't support impress.js. Try Chrome or Safari.
        </p>

        <div class="help">
            <h3>Need Help?</h3>
            <h6>Use the arrow keys move forward and back.</h6>
        </div>
        <div id="impress">



            <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
            BEGIN SLIDES
            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --->

            <div id="title" class="step clarify center"
                 data-x="0" data-y="-1000" data-z="0">
                <span style="color: #666">e &nbsp; &nbsp; x &nbsp; &nbsp;
                    p &nbsp; &nbsp; l &nbsp; &nbsp; o &nbsp; &nbsp; r &nbsp;
                    &nbsp; i &nbsp; &nbsp; n &nbsp; &nbsp; g</span>
                <hr noshade/>
                <img src="img/Google_Glass_logo.png" style="width: 800px"/>
            </div>

            <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                    SKETCH
            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --->

            <div id="sketch" class="step clarify center"
                 data-x="0" data-y="0" data-z="0">

            </div>

            <div class="step clarify center"
                 data-x="-280" data-y="-250" data-z="0" data-scale=".6">
                <span class="shadow">G l a s s &nbsp; M i r r o r &nbsp; A P
                    I</span>
                <hr noshade>
            </div>

            <div class="step clarify center"
                 data-x="280" data-y="-250" data-z="0" data-scale=".6">
                <span class="shadow">G l a s s &nbsp; D e v e l o p m e n t
                    &nbsp; K i t</span>
                <hr noshade>
            </div>

            <div class="step clarify center"
                 data-x="-280" data-y="-100" data-z="0" data-scale=".6">
                <img src="img/world.svg" style="width: 300px"/>
            </div>

            <div class="step clarify center"
                 data-x="-280" data-y="80" data-z="0" data-scale=".6">
                <img src="img/box.svg" style="width: 300px"/>
            </div>

            <div class="step clarify center"
                 data-x="-280" data-y="260" data-z="0" data-scale=".6">
                <img src="img/cogs.svg" style="width: 300px"/>
            </div>

            <div class="step clarify center"
                 data-x="280" data-y="-100" data-z="0" data-scale=".6">
                <img src="img/time.svg" style="width: 300px"/>
            </div>

            <div class="step clarify center"
                 data-x="280" data-y="80" data-z="0" data-scale=".6">
                <img src="img/battery.svg" style="width: 300px"/>
            </div>

            <div class="step clarify center"
                 data-x="280" data-y="260" data-z="0" data-scale=".6">
                <img src="img/tools.svg" style="width: 300px"/>
            </div>



            <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                    OUTLINE
            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --->

            <div class="step clarify" data-x="-2400" data-y="1000" data-z="0">
                <h2>Outline</h2>
            </div>

            <div class="step" data-x="-2300" data-y="1150" data-z="-100">
                <h3>Scalable Vector Graphics</h3>
            </div>

            <div class="step" data-x="-2300" data-y="1250" data-z="-100">
                <h3>Data Driven Documents</h3>
            </div>

            <div class="step" data-x="-2250" data-y="1350" data-z="-200">
                <h4>Drawing</h4>
            </div>

            <div class="step" data-x="-2250" data-y="1425" data-z="-200">
                <h4>Transitions</h4>
            </div>

            <div class="step" data-x="-2250" data-y="1500" data-z="-200">
                <h4>Data</h4>
            </div>

            <div class="step" data-x="-2300" data-y="1600" data-z="-100">
                <h3>Something else</h3>
            </div>


            <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                    SCALABLE VECTOR GRAPHICS
            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --->

            <div class="step clarify" data-x="-1200" data-y="1000" data-z="0">
                <h2>SVG</h2>
            </div>

            <div class="step" data-x="-1100" data-y="1150" data-z="-100">
                <h3>Display Variance</h3>
            </div>

            <div class="step" data-x="-1050" data-y="1250" data-z="-200">
                <h4>Mobile Devices &amp; Large Monitors</h4>
            </div>

            <div class="step" data-x="-1050" data-y="1325" data-z="-200">
                <h4>High Pixel Density Displays</h4>
            </div>

            <div class="step" data-x="-1100" data-y="1425" data-z="-100">
                <h3>Document Based</h3>
            </div>

            <div class="step" data-x="-1050" data-y="1525" data-z="-200">
                <h4>Selecting</h4>
            </div>

            <div class="step" data-x="-1050" data-y="1600" data-z="-200">
                <h4>Maniplulation (color, opacity)</h4>
            </div>

            <div class="step" data-x="-1050" data-y="1675" data-z="-200">
                <h4>Transitions</h4>
            </div>

            <div class="step" data-x="-1100" data-y="1775" data-z="-100">
                <h3>Easily Styled</h3>
            </div>


            <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                    DATA DRIVEN DOCUMENTS
            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --->

            <div class="step clarify" data-x="0" data-y="1000" data-z="0">
                <h2>D3</h2>
            </div>

            <!-- - - - - -
                DEMO 01
            - - - - - - -->

            <div class="step" data-x="100" data-y="1150" data-z="-100">
                <h3>Shapes</h3>
            </div>

            <div id="demo01" class="step invisible demo"
                 data-x="300" data-y="1150" data-z="101" data-scale=".1"
                 data-group="demo01">
            </div>

            <div class="step invisible"
                 data-x="240" data-y="1180" data-z="100" data-scale=".2"
                 data-group="demo01">
                <pre class="prettyprint">
var svg = d3.select('#demo01')
        .append('svg')
        .attr('width', 500)
        .attr('height', 500);

svg.append('rect')
        .attr('x', 5)
        .attr('y', 5)
        .attr('width', 490)
        .attr('height', 490)
        .style('stroke', 'gray')
        .style('stroke-width', 10)
        .style('fill', 'whitesmoke');

svg.append('circle')
        .attr('r', 200)              // Radius
        .attr('cx', 250)             // Center X Coordinate
        .attr('cy', 250)             // Center Y Coordinate
        .style('stroke', 'gray')
        .style('stroke-width', 10)
        .style('fill', 'white');
                </pre>
            </div>

            <div class="step invisible nostay"
                 data-x="258" data-y="1125" data-z="100" data-scale=".2"
                 data-group="demo01">
                <div class="focus-box"
                     style="height: 40px; width: 340px"></div>
            </div>

            <div class="step invisible nostay"
                 data-x="258" data-y="1131" data-z="100" data-scale=".2"
                 data-group="demo01">
                <div class="focus-box"
                     style="height: 40px; width: 340px"></div>
            </div>

            <div class="step invisible nostay"
                 data-x="258" data-y="1136" data-z="100" data-scale=".2"
                 data-group="demo01">
                <div class="focus-box"
                     style="height: 40px; width: 340px"></div>
            </div>

            <div class="step invisible nostay"
                 data-x="258" data-y="1178" data-z="100" data-scale=".2"
                 data-group="demo01">
                <div class="focus-box"
                     style="height: 40px; width: 380px"></div>
            </div>


            <!-- - - - - -
                DEMO 02
            - - - - - - -->

            <div class="step" data-x="100" data-y="1250" data-z="-100">
                <h3>CSS</h3>
            </div>

            <div id="demo02" class="step invisible demo"
                 data-x="500" data-y="1250" data-z="101" data-scale=".1"
                 data-group="demo02">
            </div>

            <div class="step invisible"
                 data-x="440" data-y="1280" data-z="100" data-scale=".2"
                 data-group="demo02">
                <pre class="prettyprint">
var svg = d3.select('#demo02')
        .append('svg')
        .attr('width', 500)
        .attr('height', 500);

svg.append('rect')
        .attr('x', 5)
        .attr('y', 5)
        .attr('width', 490)
        .attr('height', 490);
<span class="omitted">        .style('stroke', 'gray')
        .style('stroke-width', 10)
        .style('fill', 'whitesmoke');</span>

svg.append('circle')
        .attr('r', 200)
        .attr('cx', 250)
        .attr('cy', 250);
<span class="omitted">        .style('stroke', 'gray')
        .style('stroke-width', 10)
        .style('fill', 'white');</span>
                </pre>
            </div>

            <div class="step invisible nostay"
                 data-x="458" data-y="1304" data-z="100" data-scale=".2"
                 data-group="demo02">
                <div class="focus-box"
                     style="height: 92px; width: 400px"></div>
                <div style="height: 115px"></div>
                <div class="focus-box"
                     style="height: 92px; width: 400px"></div>
            </div>

            <div class="step invisible"
                 data-x="640" data-y="1280" data-z="100" data-scale=".2"
                 data-group="demo02">
                <pre class="prettyprint">
svg {
    stroke: gray;
    stroke-width: 10;
}

rect {
    fill: whitesmoke;
}

circle {
    fill: white;
}
                </pre>
            </div>


            <!-- - - - - -
                DEMO 03
            - - - - - - -->

            <div class="step" data-x="100" data-y="1350" data-z="-100">
                <h3>On</h3>
            </div>

            <div id="demo03" class="step invisible demo"
                 data-x="300" data-y="1350" data-z="101" data-scale=".1"
                 data-group="demo03">
            </div>

            <div class="step invisible"
                 data-x="240" data-y="1380" data-z="100" data-scale=".2"
                 data-group="demo03">
                <pre class="prettyprint">
var svg = d3.select('#demo03')
        .append('svg')
        .attr('width', 500)
        .attr('height', 500);

svg.append('rect')
        .attr('x', 5)
        .attr('y', 5)
        .attr('width', 490)
        .attr('height', 490);

svg.append('circle')
        .attr('r', 200)
        .attr('cx', 250)
        .attr('cy', 250)
        .on('mouseover', over)
        .on('mouseout', out);

function over() {
    d3.select(this).style('opacity', 0);
}

function out() {
    d3.select(this).style('opacity', 1);
}
                </pre>
            </div>

            <div class="step invisible nostay"
                 data-x="236" data-y="1418" data-z="100" data-scale=".2"
                 data-group="demo03">
                <div class="focus-box"
                     style="height: 280px; width: 600px"></div>
            </div>


            <!-- - - - - -
                DEMO 04
            - - - - - - -->

            <div class="step" data-x="100" data-y="1450" data-z="-100">
                <h3>Transition</h3>
            </div>

            <div id="demo04" class="step invisible demo"
                 data-x="500" data-y="1450" data-z="101" data-scale=".1"
                 data-group="demo04" data-focus-id="demo04">
            </div>

            <div class="step invisible"
                 data-x="440" data-y="1480" data-z="100" data-scale=".2"
                 data-group="demo04" data-focus-id="demo04">
                <pre class="prettyprint">
var svg = d3.select('#demo04')
        .append('svg')
        .attr('width', 500)
        .attr('height', 500);

svg.append('rect')
        .attr('x', 5)
        .attr('y', 5)
        .attr('width', 490)
        .attr('height', 490);

svg.append('circle')
        .attr('r', 200)
        .attr('cx', 250)
        .attr('cy', 250)
        .on('mousedown', down);

function down() {
    d3.select(this)
        .transition()
            .duration(200)
            .attr('r', 150)
        .transition()
            .delay(200)
            .attr('r', 200);
}
                </pre>
            </div>

            <div class="step invisible nostay"
                 data-x="432" data-y="1518" data-z="100" data-scale=".2"
                 data-group="demo04" data-focus-id="demo04">
                <div class="focus-box"
                     style="height: 310px; width: 540px"></div>
            </div>


            <!-- - - - - -
                DEMO 05
            - - - - - - -->

            <div class="step" data-x="100" data-y="1550" data-z="-100">
                <h3>Each End</h3>
            </div>

            <div id="demo05" class="step invisible demo"
                 data-x="300" data-y="1550" data-z="101" data-scale=".1"
                 data-group="demo05">
            </div>

            <div class="step invisible"
                 data-x="240" data-y="1580" data-z="100" data-scale=".2"
                 data-group="demo05">
                <pre class="prettyprint">
var svg = d3.select('#demo05')
        .append('svg')
        .attr('width', 500)
        .attr('height', 500);

svg.append('rect')
        .attr('x', 5)
        .attr('y', 5)
        .attr('width', 490)
        .attr('height', 490);

svg.append('circle')
        .attr('r', 200)
        .attr('cx', 250)
        .attr('cy', 250)
        .on('mousedown', down);

function down() {
    d3.select(this)                 // Select may return many
        .transition()
            .attr('r', 150)
            .each('end', up);       // For each transition end
}                                   // .each('start', cb)
                                    //     follows .delay()
function up() {
    d3.select(this)
        .transition()               // No delay necessary
            .attr('r', 200);
}
                </pre>
            </div>

            <div class="step invisible nostay"
                 data-x="248" data-y="1617" data-z="100" data-scale=".2"
                 data-group="demo05">
                <div class="focus-box"
                     style="height: 380px; width: 840px"></div>
            </div>

            <div class="step invisible nostay"
                 data-x="432" data-y="1518" data-z="100" data-scale=".2"
                 data-group="demo05" data-focus="demo04">
            </div>

            <div class="step invisible nostay"
                 data-x="248" data-y="1617" data-z="100" data-scale=".2"
                 data-group="demo05">
                <div class="focus-box"
                     style="height: 380px; width: 840px"></div>
            </div>


            <!-- - - - - -
                DEMO 06
            - - - - - - -->

            <div class="step" data-x="100" data-y="1650" data-z="-100">
                <h3>Computed</h3>
            </div>

            <div id="demo06" class="step invisible demo"
                 data-x="500" data-y="1650" data-z="101" data-scale=".1"
                 data-group="demo06" data-focus-id="demo06">
            </div>

            <div class="step invisible"
                 data-x="440" data-y="1680" data-z="100" data-scale=".2"
                 data-group="demo06" data-focus-id="demo06">
                <pre class="prettyprint">
var svg = d3.select('#demo06')
        ...

svg.append('circle')
        .attr('r', 200)
        .attr('cx', 250)
        .attr('cy', 250)
        .on('mousedown', down);

function down() {
    d3.select(this)
        .transition()
            .attr('r', 150)          // To 150 from 200
            .style('fill', 'gray')   // To gray from ?
            .each('end', up);
}

function up() {
    d3.select(this)
        .transition()
            .attr('r', 200)          // To 200 from 150
            .style('fill', 'white'); // To white from gray
}
                </pre>
            </div>

            <div class="step invisible nostay"
                 data-x="462" data-y="1688" data-z="100" data-scale=".2"
                 data-group="demo06">
                <div class="focus-box"
                     style="height: 40px; width: 700px"></div>
            </div>


            <!-- - - - - -
                DEMO 07
            - - - - - - -->

            <div class="step" data-x="100" data-y="1750" data-z="-100">
                <h3>Ease</h3>
            </div>

            <div id="demo07" class="step invisible demo"
                 data-x="300" data-y="1750" data-z="101" data-scale=".1"
                 data-group="demo07">
            </div>

            <div class="step invisible"
                 data-x="240" data-y="1780" data-z="100" data-scale=".2"
                 data-group="demo07">
                <pre class="prettyprint">
var demo07 = d3.select('#demo07')
        ...

demo07.append('circle')
        ...
        .on('mousedown', down);

function down() {
    d3.select(this)
            .transition()
            .attr('r', 150)
            .style('fill', 'gray')
            .ease('out')
            .each('end', up);
}

function up() {
    d3.select(this)
            .transition()
            .attr('r', 200)
            .style('fill', 'white')
            .ease('in');
}
                </pre>
            </div>

            <div class="step invisible nostay"
                 data-x="262" data-y="1806" data-z="100" data-scale=".2"
                 data-group="demo07">
                <div class="focus-box"
                     style="height: 40px; width: 300px"></div>
                <div style="height: 192px; width: 300px"></div>
                <div class="focus-box"
                     style="height: 40px; width: 300px"></div>
            </div>

            <div class="step invisible"
                 data-x="440" data-y="1680" data-z="100" data-scale=".2"
                 data-group="demo07" data-focus="demo06">
            </div>

            <div class="step invisible"
                 data-x="240" data-y="1780" data-z="100" data-scale=".2"
                 data-group="demo07">
            </div>


            <!-- - - - - -
                DEMO 08
            - - - - - - -->

            <div class="step" data-x="100" data-y="1850" data-z="-100">
                <h3>Tween</h3>
            </div>

            <div id="demo08" class="step invisible demo"
                 data-x="500" data-y="1850" data-z="101" data-scale=".1"
                 data-group="demo08" data-focus-id="demo08">
            </div>

            <div class="step invisible"
                 data-x="440" data-y="1880" data-z="100" data-scale=".2"
                 data-group="demo08" data-focus-id="demo08">
                <pre class="prettyprint">
...
function demo08down() {
    d3.select(this)
        .transition()
        .attr('r', 150)
        .style('fill', 'gray')
        .each('end', up);
    d3.select('#text')
        .transition()
        .tween("text", toColor('gray'));
}

function up() {
    d3.select(this)
        .transition()
        .attr('r', 200)
        .style('fill', 'white');
    d3.select('#text')
        .transition()
        .tween("text", toColor('white'));
}

function toColor(color) {
    return function() {
        var i = d3.interpolate(this.textContent, color);
        return function(t) {
            this.textContent = i(t);
        };
    }
}
                </pre>
            </div>

            <div class="step invisible nostay"
                 data-x="442" data-y="1844" data-z="100" data-scale=".2"
                 data-group="demo08">
                <div class="focus-box"
                     style="height: 92px; width: 540px"></div>
            </div>

            <div class="step invisible nostay"
                 data-x="436" data-y="1934" data-z="100" data-scale=".2"
                 data-group="demo08">
                <div class="focus-box"
                     style="height: 230px; width: 760px"></div>
            </div>


            <!-- - - - - -
                DEMO 09
            - - - - - - -->

            <div class="step" data-x="100" data-y="1950" data-z="-100">
                <h3>Data</h3>
            </div>

            <div id="demo09" class="step invisible demo"
                 data-x="385" data-y="1981" data-z="101" data-scale=".25"
                 data-group="demo09">
            </div>

            <div class="step invisible"
                 data-x="240" data-y="1980" data-z="100" data-scale=".2"
                 data-group="demo09">
                <pre class="prettyprint">
var dataset = [16, 24, 32, 40, 48];
        ...

demo09.append('rect')
        ...
        .on('mousedown', fix);

demo09.append('circle')
        .attr('r', 40)
        .attr('cx', 50)
        .attr('cy', 50);

demo09.append('circle')
        .attr('r', 40)
        .attr('cx', 50)
        .attr('cy', 150);

function fix() {
    demo09.selectAll('circle')
            .data(dataset)
        .transition()
            .attr('r', function(d) {return d})
            .attr('cx', 50)
            .attr('cy', function(d, i) {
                return 50 + (i * 100);
            });
}
                </pre>
            </div>

            <div class="step invisible skip slide huge"
                 data-x="304" data-y="2050" data-z="102" data-scale=".08"
                 data-group="demo09" data-focus-id="demo09"><br>
                Attributes can take either a static value or a function that
                    receives the dataset value (datum) and dataset index.
                    This function is commonly used to set layout, size or
                    color based on the associated data.
             </div>

            <div class="step invisible nostay"
                 data-x="265" data-y="2009" data-z="100" data-scale=".2"
                 data-group="demo09">
                <div class="focus-box"
                     style="height: 40px; width: 300px"></div>
            </div>

            <div class="step invisible nostay"
                 data-x="258" data-y="2030" data-z="100" data-scale=".2"
                 data-group="demo09" data-focus="demo09">
                <div class="focus-box"
                     style="height: 140px; width: 600px"></div>
            </div>



            <!-- - - - - -
                DEMO 10
            - - - - - - -->

            <div class="step" data-x="100" data-y="2050" data-z="-100">
                <h3>Enter</h3>
            </div>

            <div id="demo10" class="step invisible demo"
                 data-x="585" data-y="1981" data-z="101" data-scale=".25"
                 data-group="demo10">
            </div>

            <div class="step invisible"
                 data-x="440" data-y="1980" data-z="100" data-scale=".2"
                 data-group="demo10">
                <pre class="prettyprint">
var dataset = [16, 24, 32, 40, 48];
        ...

svg.append('rect')
        ...
        .on('mousedown', fix);

svg.append('circle')
        .attr('r', 40)
        .attr('cx', 50)
        .attr('cy', 50);

svg.append('circle')
        .attr('r', 40)
        .attr('cx', 50)
        .attr('cy', 150);

function fix() {
    svg.selectAll('circle')
            .data(dataset)
        .enter().append('circle')
            .attr('r', function(d) {return d})
            .attr('cx', 50)
            .attr('cy', function(d, i) {
                return 50 + (i * 100)
            });
}
                </pre>
            </div>

            <div class="step invisible skip slide large"
                 data-x="504" data-y="2050" data-z="102" data-scale=".08"
                 data-group="demo10" data-focus-id="demo10"><br>
                <p>Enter is strange<br/>(comes from stage terminology)</p>
                <br/>
                <ol>
                    <li>It creates a new chain because it returns an enter object and not
                        the original selection</li>
                    <li>For every piece of data that exists in the dataset the chained
                        functions are run.  Because they are chained to the enter object
                        and not the selection they only run on objects "entering the stage"</li>
                </ol>
            </div>

            <div class="step invisible nostay"
                 data-x="455" data-y="2014" data-z="100" data-scale=".2"
                 data-group="demo10">
                <div class="focus-box"
                     style="height: 40px; width: 400px"></div>
            </div>

            <div class="step invisible nostay"
                 data-x="458" data-y="2030" data-z="100" data-scale=".2"
                 data-group="demo10" data-focus="demo10">
                <div class="focus-box"
                     style="height: 140px; width: 600px"></div>
            </div>



            <!-- - - - - -
                DEMO 11
            - - - - - - -->

            <div class="step" data-x="100" data-y="2150" data-z="-100">
                <h3>Data Transition</h3>
            </div>




            <div class="step invisible" data-x="0" data-y="0" data-z="5000">
            </div>

        </div>
        <script type="text/javascript" src="js/impress.js"></script>
        <script>
            var el = document.getElementById("impress");
            impress().init();

            var timer;
            var focusList = [];
            var $help = $('.help');
            var activeGroup;

            el.addEventListener("impress:stepenter", function(event) {
                setTimeout(function() {
                    var $evt = $(event.target);

                    var focus = $evt.attr('data-focus');
                    if (focus) {
                        var $target = $('[data-focus-id="' + focus + '"]');
                        if ($target[0]) {
                            $target.addClass('clarify');
                            focusList.push($target);
                        }
                    }

                    // Group Stuff
                    var group = $evt.attr('data-group');
                    if (group) {
                        if (activeGroup) {
                            if (activeGroup !== group) {
                                $('[data-group="' + activeGroup + '"]').removeClass('stay');
                                activeGroup = group;
                            }
                        }
                        else {
                            activeGroup = group;
                        }
                    }
                    else {
                        if (activeGroup) {
                            $('[data-group="' + activeGroup + '"]').removeClass('stay');
                            activeGroup = null;
                        }
                    }

                    var onenter = $evt.attr('data-onenter');
                    if (window[onenter]) window[onenter]();
                }, 200);
            }, false);

            el.addEventListener("impress:stepleave", function(event) {
                setTimeout(function() {
                    var $evt = $(event.target);

                    var stay = $evt.attr('data-stay');
                    if (stay) {
                        $evt.addClass('stay');
                    }

                    // Group Stuff
                    var group = $evt.attr('data-group');
                    if (group) {
                        if (activeGroup && activeGroup === group) {
                            if (!$evt.hasClass('nostay'))
                                $evt.addClass('stay');
                        }
                    }

                    for (var i = 0, cnt = focusList.length; i < cnt; i++) {
                        focusList[i].removeClass('clarify');
                    }
                    focusList = [];

                    var onleave = $evt.attr('data-onleave');
                    if (window[onleave]) window[onleave]();
                }, 200);
            }, false);

            function onGuidedEnter() {
                timer = setTimeout(function() {
                    $help.addClass('show');
                }, 3000);
            }
            function onGuidedLeave() {
                clearTimeout(timer);
                $help.removeClass('show');
            }

            function playVid() {
                var video = document.getElementById('video');
                video.addEventListener('canplay', function(e) {
                    this.play();
                }, false);
            }

            function dark() {
                setTimeout(function() {
                    $('body').addClass('dark').removeClass('cloudy');
                }, 1);
            }

            // -----------------------------------------------------------------
            //    --- DEMOS ---
            // -----------------------------------------------------------------


            // --- DEMO 01 ---

            var demo01 = d3.select('#demo01')
                    .append('svg')
                    .attr('width', 500)
                    .attr('height', 500);

            demo01.append('rect')
                    .attr('x', 5)                // Upper Left X Coordinate
                    .attr('y', 5)                // Upper Left Y Coordinate
                    .attr('width', 490)          // Width
                    .attr('height', 490)         // Height
                    .style('stroke', 'gray')
                    .style('stroke-width', 10)
                    .style('fill', 'whitesmoke');

            demo01.append('circle')
                    .attr('r', 200)              // Radius
                    .attr('cx', 250)             // Center X Coordinate
                    .attr('cy', 250)             // Center Y Coordinate
                    .style('stroke', 'gray')
                    .style('stroke-width', 10)
                    .style('fill', 'white');


            // --- DEMO 02 ---

            var demo02 = d3.select('#demo02')
                    .append('svg')
                    .attr('width', 500)
                    .attr('height', 500);

            demo02.append('rect')
                    .attr('x', 5)
                    .attr('y', 5)
                    .attr('width', 490)
                    .attr('height', 490);

            demo02.append('circle')
                    .attr('r', 200)              // Radius
                    .attr('cx', 250)             // Center X Coordinate
                    .attr('cy', 250);            // Center Y Coordinate


            // --- DEMO 03 ---

            var demo03 = d3.select('#demo03')
                    .append('svg')
                    .attr('width', 500)
                    .attr('height', 500);

            demo03.append('rect')
                    .attr('x', 5)
                    .attr('y', 5)
                    .attr('width', 490)
                    .attr('height', 490);

            demo03.append('circle')
                    .attr('r', 200)
                    .attr('cx', 250)
                    .attr('cy', 250)
                    .on('mouseover', demo03over)
                    .on('mouseout', demo03out);

            function demo03over() {
                d3.select(this).style('opacity', 0);
            }

            function demo03out() {
                d3.select(this).style('opacity', 1);
            }


            // --- DEMO 04 ---

            var demo04 = d3.select('#demo04')
                    .append('svg')
                    .attr('width', 500)
                    .attr('height', 500);

            demo04.append('rect')
                    .attr('x', 5)
                    .attr('y', 5)
                    .attr('width', 490)
                    .attr('height', 490);

            demo04.append('circle')
                    .attr('r', 200)
                    .attr('cx', 250)
                    .attr('cy', 250)
                    .on('mousedown', demo04down);

            function demo04down() {
                d3.select(this)
                    .transition()
                        .duration(200)
                        .attr('r', 150)
                    .transition()
                        .delay(200)
                        .attr('r', 200);
            }


            // --- DEMO 05 ---

            var demo05 = d3.select('#demo05')
                    .append('svg')
                    .attr('width', 500)
                    .attr('height', 500);

            demo05.append('rect')
                    .attr('x', 5)
                    .attr('y', 5)
                    .attr('width', 490)
                    .attr('height', 490);

            demo05.append('circle')
                    .attr('r', 200)
                    .attr('cx', 250)
                    .attr('cy', 250)
                    .on('mousedown', demo05down);

            function demo05down() {
                d3.select(this)                 // Remember select can return many
                        .transition()
                        .attr('r', 150)
                        .each('end', demo05up); // Each transition end calls up()
            }                                   // .each('start', cb) runs after delays

            function demo05up() {
                d3.select(this)
                        .transition()           // No delay necessary
                        .attr('r', 200);
            }


            // --- DEMO 06 ---

            var demo06 = d3.select('#demo06')
                    .append('svg')
                    .attr('width', 500)
                    .attr('height', 500);

            demo06.append('rect')
                    .attr('x', 5)               // Upper Left X Coordinate
                    .attr('y', 5)               // Upper Left Y Coordinate
                    .attr('width', 490)          // Width
                    .attr('height', 490);        // Height

            demo06.append('circle')
                    .attr('r', 200)              // Radius
                    .attr('cx', 250)             // Center X Coordinate
                    .attr('cy', 250)             // Center Y Coordinate
                    .on('mousedown', demo06down);

            function demo06down() {
                d3.select(this)                 // Remember select can return many
                        .transition()
                        .attr('r', 150)
                        .style('fill', 'gray')  // Transition to gray from computed
                        .each('end', demo06up);
            }

            function demo06up() {
                d3.select(this)
                        .transition()               // No delay necessary
                        .attr('r', 200)
                        .style('fill', 'white');// Transition to white from gray
            }


            // --- DEMO 07 ---

            var demo07 = d3.select('#demo07')
                    .append('svg')
                    .attr('width', 500)
                    .attr('height', 500);

            demo07.append('rect')
                    .attr('x', 5)
                    .attr('y', 5)
                    .attr('width', 490)
                    .attr('height', 490);

            demo07.append('circle')
                    .attr('r', 200)
                    .attr('cx', 250)
                    .attr('cy', 250)
                    .on('mousedown', demo07down);

            function demo07down() {
                d3.select(this)
                        .transition()
                        .attr('r', 150)
                        .style('fill', 'gray')
                        .ease('out')
                        .each('end', demo07up);
            }

            function demo07up() {
                d3.select(this)
                        .transition()
                        .attr('r', 200)
                        .style('fill', 'white')
                        .ease('in');
            }


            // --- DEMO 08 ---


            var demo08 = d3.select('#demo08')
                    .append('svg')
                    .attr('width', 500)
                    .attr('height', 500);

            var demo08text = d3.select('#demo08')
                    .append('div')
                    .attr('id', 'demo08text')
                    .text('#ffffff');

            demo08.append('rect')
                    .attr('x', 5)
                    .attr('y', 5)
                    .attr('width', 490)
                    .attr('height', 490);

            demo08.append('circle')
                    .attr('r', 200)
                    .attr('cx', 250)
                    .attr('cy', 250)
                    .on('mousedown', demo08down);

            function demo08down() {
                d3.select(this)
                        .transition()
                        .attr('r', 150)
                        .style('fill', 'gray')
                        .ease('out')
                        .each('end', demo08up);
                d3.select('#demo08text')
                        .transition()
                        .tween("text", demo08toColor('gray'));
            }

            function demo08up() {
                d3.select(this)
                        .transition()
                        .attr('r', 200)
                        .style('fill', 'white')
                        .ease('in');
                d3.select('#demo08text')
                        .transition()
                        .tween("text", demo08toColor('white'));
            }

            function demo08toColor(color) {
                return function() {
                    var i = d3.interpolate(this.textContent, color);
                    return function(t) {
                        this.textContent = i(t);
                    };
                }
            }


            // --- DEMO 09 ---

            var demo09dataset = [16, 24, 32, 40, 48];

            var demo09 = d3.select('#demo09')
                    .append('svg')
                    .attr('width', 100)
                    .attr('height', 500);

            demo09.append('rect')
                    .attr('x', 5)
                    .attr('y', 5)
                    .attr('width', 90)
                    .attr('height', 490)
                    .on('mousedown', demo09fix);

            demo09.append('circle')
                    .attr('r', 40)
                    .attr('cx', 50)
                    .attr('cy', 50);

            demo09.append('circle')
                    .attr('r', 40)
                    .attr('cx', 50)
                    .attr('cy', 150);

            function demo09fix() {
                demo09.selectAll('circle')
                        .data(demo09dataset)
                    .transition()
                /**
                 * Attributes can take either a static value or a function
                 * that receives the dataset value (datum) and dataset index.
                 * This function is commonly used to set layout, size or
                 * color based on the associated data.
                 */
                        .attr('r', function(d) { return d })
                        .attr('cx', 50)
                        .attr('cy', function(d, i) { return 50 + (i * 100) });
            }


            // --- DEMO 10 ---

            var demo10dataset = [16, 24, 32, 40, 48];

            var demo10 = d3.select('#demo10')
                    .append('svg')
                    .attr('width', 100)
                    .attr('height', 500);

            demo10.append('rect')
                    .attr('x', 5)
                    .attr('y', 5)
                    .attr('width', 90)
                    .attr('height', 490)
                    .on('mousedown', demo10fix);

            demo10.append('circle')
                    .attr('r', 40)
                    .attr('cx', 50)
                    .attr('cy', 50);

            demo10.append('circle')
                    .attr('r', 40)
                    .attr('cx', 50)
                    .attr('cy', 150);

            function demo10fix() {
                /**
                 * Enter is strange (comes from stage terminology)
                 *
                 * 1. It creates a new chain because it returns an enter object and not
                 * the original selection
                 *
                 * 2. For every piece of data that exists in the dataset the chained
                 * functions are run.  Because they are chained to the enter object
                 * and not the selection they only run on objects "entering the stage"
                 */
                demo10.selectAll('circle')
                        .data(demo10dataset)
                    .enter().append('circle')
                        .attr('r', function(d) { return d })
                        .attr('cx', 50)
                        .attr('cy', function(d, i) { return 50 + (i * 100) });
            }
        </script>
    </body>
</html>